{"ast":null,"code":"import React,{useState}from\"react\";import{Link}from\"react-router-dom\";import Axios from\"axios\";import{connect}from\"react-redux\";import\"./scraperPage.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const ScraperPage=_ref=>{let{username}=_ref;const[title,setTitle]=useState(\"\");const[ingredients,setIngredients]=useState(\"\");const[instructions,setInstructions]=useState(\"\");const[images,setImages]=useState([]);const[url,setUrl]=useState(\"\");const[isSaved,setIsSaved]=useState(false);const[selectedImage,setSelectedImage]=useState(\"\");const onNewUrlInput=url=>{setUrl(url);setIsSaved(false);fetch(\"http://localhost:3001/message?url=\".concat(url)).then(res=>res.json()).then(data=>{setTitle(data.title);setIngredients(data.ingredients);setInstructions(data.instructions);setImages(data.images);});};const saveRecipe=()=>{console.log(\"Hello\");Axios.post(\"http://localhost:3001/save\",{username:username,url:url,title:title,ingredients:ingredients,instructions:instructions,image:selectedImage}).then(response=>{if(!response.data.err){setIsSaved(true);}});};const onSelectedImageChanged=e=>{setSelectedImage(e.target.defaultValue);};return/*#__PURE__*/_jsxs(\"div\",{className:\"recipe-scraper\",style:{whiteSpace:\"pre-line\"},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:saveRecipe,children:isSaved?\"Saved!\":\"Save Recipe\"}),/*#__PURE__*/_jsx(Link,{to:\"/index\",children:\"My Recipes\"})]}),/*#__PURE__*/_jsx(\"h1\",{children:\"Enter a website URL below to extract the recipe\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"URL\",onChange:e=>onNewUrlInput(e.target.value)}),/*#__PURE__*/_jsx(\"h1\",{children:title}),/*#__PURE__*/_jsx(\"h3\",{children:\"Ingredients:\"}),ingredients,/*#__PURE__*/_jsx(\"h3\",{children:\"Instructions:\"}),instructions,/*#__PURE__*/_jsx(\"h3\",{children:\"Select an image to save:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"images\",children:images.map((element,i)=>element&&/*#__PURE__*/_jsxs(\"label\",{className:\"image-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:i,name:\"image\",value:element,onChange:onSelectedImageChanged,defaultChecked:i==0,className:\"radio\"}),/*#__PURE__*/_jsx(\"img\",{src:element,className:\"image\"})]}))})]});};const mapStateToProps=state=>({username:state.username});export default connect(mapStateToProps)(ScraperPage);","map":{"version":3,"names":["React","useState","Link","Axios","connect","jsx","_jsx","jsxs","_jsxs","ScraperPage","_ref","username","title","setTitle","ingredients","setIngredients","instructions","setInstructions","images","setImages","url","setUrl","isSaved","setIsSaved","selectedImage","setSelectedImage","onNewUrlInput","fetch","concat","then","res","json","data","saveRecipe","console","log","post","image","response","err","onSelectedImageChanged","e","target","defaultValue","className","style","whiteSpace","children","onClick","to","type","placeholder","onChange","value","map","element","i","id","name","defaultChecked","src","mapStateToProps","state"],"sources":["/Users/nicolecheung/Documents/my-recipes/client/src/pages/scraper/scraperPage.jsx"],"sourcesContent":["import React, { useState} from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Axios from \"axios\";\nimport { connect } from \"react-redux\";\n\n\nimport \"./scraperPage.css\";\n\n\n\n\nconst ScraperPage = ({username}) => {\n\n  const [title, setTitle] = useState(\"\");\n  const [ingredients, setIngredients] = useState(\"\");\n  const [instructions, setInstructions] = useState(\"\");\n  const [images, setImages] = useState([]);\n  const [url, setUrl] = useState(\"\");\n  const [isSaved, setIsSaved] = useState(false);\n  const [selectedImage, setSelectedImage] = useState(\"\");\n  \n\n  const onNewUrlInput = (url) => {\n    setUrl(url);\n    setIsSaved(false);\n    fetch(`http://localhost:3001/message?url=${url}`)\n    .then((res) => res.json())\n    .then((data) => {\n      setTitle(data.title);\n      setIngredients(data.ingredients);\n      setInstructions(data.instructions);\n      setImages(data.images);\n    });\n  }\n\n  \n\n  const saveRecipe = () => {\n    console.log(\"Hello\");\n    Axios.post(\"http://localhost:3001/save\", {\n      username: username,\n      url: url,\n      title: title,\n      ingredients: ingredients,\n      instructions: instructions, \n      image: selectedImage,\n    }).then((response) => {\n      if (!response.data.err) {\n        setIsSaved(true);\n      }\n   });\n  };\n\n  const onSelectedImageChanged = (e) => {\n    setSelectedImage(e.target.defaultValue);\n  }\n\n\n  return (\n      <div className=\"recipe-scraper\" style={{whiteSpace: \"pre-line\"}}>\n        <div>\n        <button onClick={saveRecipe}>{isSaved ? \"Saved!\" : \"Save Recipe\"}</button>\n        <Link to=\"/index\">My Recipes</Link>\n        </div>\n        <h1>Enter a website URL below to extract the recipe</h1>\n        <input type=\"text\" placeholder=\"URL\" onChange={e => onNewUrlInput(e.target.value)} />\n        <h1>{title}</h1>\n        {/* <img src={images} width=\"300\"></img> */}\n        <h3>Ingredients:</h3>\n        {ingredients}\n        <h3>Instructions:</h3>\n        {instructions}\n        <h3>Select an image to save:</h3>\n        <div className=\"images\">\n          {images.map((element, i) => \n            element && \n            <label className=\"image-container\">\n              <input type=\"radio\" id={i} name=\"image\" value={element} onChange={onSelectedImageChanged} defaultChecked={i==0} className=\"radio\"/>\n              <img src={element} className=\"image\"/>\n            </label>\n\n            )}\n         </div>\n      </div>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  username: state.username\n});\n\nexport default connect(mapStateToProps)(ScraperPage);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}